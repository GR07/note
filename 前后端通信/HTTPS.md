# HTTP 为什么不安全

HTTP 协议位于应用层，TCP/IP 协议的上层，而数据报文在这些层之间都是没有加密的明文，这就导致了一下的问题：

## 通信是采用明文（不加密），内容可能被窃听、篡改。

这个过程被称为“中间人攻击”。

# HTTPS 实现原理

所以为了解决上述的问题，HTTPS 应运而生。目前大部分的网站都已经过渡到了 HTTPS。

现在的浏览器，如果是 HTTP 协议的，就很明目的提示我们此网站是不安全的，因此我们在输入一些表单私人信息的时候就需要注意了。

HTTPS 本质也是基于 HTTP 协议的，不过通过一些安全手段来解决上面 HTTP 存在的问题。

以前来说，HTTP 协议是应用层协议，直接和下层 TCP 进行通信，而增加了 SSL 协议之后，就变成了 HTTP 先跟 SSL 通信再由 SSL 跟 TCP 通信，也就是说HTTPS是披着 SSL 协议外壳的 HTTP 协议。

> SSL 是独立于 HTTP 的协议，所以不光是 HTTP 协议，其他运行在应用层的 SMTP 和 Telnet 等协议均可配合 SSP 协议使用。可以说 SSL 是当今世界上应用最为广泛的网络安全技术。


> HTTPS = HTTP + 加密 + 证书 + 完整性保护

# 加密

HTTPS 采用混合加密机制，也就是对称加密 + 非对称加密混用来实现加密机制

## 数据传输阶段（对称密钥加密）

对称密钥加密又称为共享密钥加密（Common key crypto system），是在加密和解密阶段使用同一个密钥的方式。也就是说，通信双方必须储存同一份密钥，也就是说只要攻击者拿到了密钥，就可以发起攻击。

因此，加密的重中之重就是 如何安全地发送密钥并不泄漏。

## 证书交换验证阶段（非对称加密）

加密过程就是，发送加密报文的一方是用对方的公开密钥进行加密，接收方式用自己本地的私钥进行解密，也就是说发送方并不需要附带着发送用来解密的密钥，这种方式就不需要考虑密钥在传输过程中被攻击这获取到。

## 总结混合验证机制流程

非对称加密的场景只在服务端保存私钥，也就是说一对公私钥只能单向传输数据，因此可以用来确认通信安全以及服务端返回证书。确认安全之后，传输数据采用的就是速度更快的对称加密。

## 证书

交给 第三方权威机构 -- 数字证书认证机构

## 数据完整性

确保数据完整性，也就意味着数据安全没有被第三方篡改，这时候就需要通过 数字签名。