<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vue-router</title>
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
</head>
<body>
  <script>

    /**
     * methods: 可以定义方法来进行属性的修改，（不同）每次都会调用。
     */


    /**
     * computed: 当依赖的数据发生改变时会调用，然后会更新view {{ }}, 起到一个缓存的作用，所以性能更好。
     */
    // fullName不能在data中定义,只能放到view视图中
    data: {
      firstName: 'Foo',
      lastName: 'Bar'
    },
    computed: {
      fullName: function () {
        return this.firstName + ' ' + this.lastName
      }
    }


    /**
     * watch: 监听data的数据发生变化时可以做一系列事情，可以支持异步操作。
     * 
     * 实例: 常用于监听路由参数, 因为当路由参数发生变化时候, 
     * 例如 foo/:id 组件实例会被复用, 所以生命周期不会重新走一遍,
     * 这时候就可以用 watch 监听路由变化 做一些事情.
     */
      // first 如果改变了会打印新的first
      data(){
        return{
          'first':2
        }
      },
      watch:{
        first(){
          console.log(this.first)
        }
      },



      
    // 三种方式分别实现：根据input的改变输出不同的数组。
    new Vue({
      el: "#app",
      data() {
        return {
          input: '',
          languages: []
        }
      },
      methods: {
        handleSearch() {
          this.languages = [
            'JavaScript',
            'Ruby',
            'Scala',
            'Python',
            'Java',
            'Kotlin',
            'Elixir'
          ].filter(item => item.toLowerCase().includes(this.input.toLowerCase()))
        }
      },
      //
      computed: {
        filteredList() {
          return this.languages.filter((item) => {
            return item.toLowerCase().includes(this.input.toLowerCase())
          })
        }
      },
      watch: {
        input: {
          handler() {
            this.languages = [
              'JavaScript',
              'Ruby',
              'Scala',
              'Python',
              'Java',
              'Kotlin',
              'Elixir'
            ].filter(item => item.toLowerCase().includes(this.input.toLowerCase()))
          },
          immediate: true
        }
      }
    })


  </script>
</body>
</html>