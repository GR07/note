首先 async await 是 生成器（generator）的语法糖

generator 是 iterator 的语法糖





# 微任务 / 宏任务

宏任务指同步任务

微任务指异步任务




# async

async 定义的方法默认一定会返回一个promise

这个 promise 要么会通过显示 return xx 被 resolve，要么会通过一个从async函数中抛出的（或其中没有被捕获到的）异常被reject。

如果一个async函数的返回值看起来不是 promise，那么它将会被隐式地包装在一个 promise 中。


# 简单例子
```js
setTimeout(() => alert("timeout"));

Promise.resolve()
  .then(() => alert("promise"));

alert("code");

```

setTimeout 是一个宏任务，回调函数会在下次事件循环执行宏任务前执行。

then 会通过微任务队列，在当前事件循环之后执行。

alert 首先显示，因为它是常规的同步调用。