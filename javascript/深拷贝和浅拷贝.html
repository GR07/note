<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>深拷贝 / 浅拷贝</title>
</head>
<body>
  <script>

    /**
     * 深拷贝是传值，浅拷贝是传址。
     */


    // 这种直接赋值就是浅拷贝
    var arr1 = ["red","yellow","black"];
    var arr2 = arr1;
    arr2[1] = "green";
    console.log("数组的原始值：" + arr1 ); // red","green","black
    console.log("数组的新值：" + arr2);    // red","green","black



    /*注意！！！！*/
    // slice 和 concat 这两个方法，仅适用于对不包含引用对象的一维数组的深拷贝。

    // 一维数组深拷贝
    var arr1 = ["1","2","3"];
    var arr2 = arr1.slice(0);
    arr2[1] = "9";
    console.log("数组的原始值：" + arr1 ); // 1 2 3
    console.log("数组的新值：" + arr2 );   // 1 9 3

    // 一维数组深拷贝
    var arr1 = ["1","2","3"];
    var arr2 = arr1.concat();
    arr2[1] = "9";
    console.log("数组的原始值：" + arr1 ); // 1 2 3
    console.log("数组的新值：" + arr2 );   // 1 9 3


    

    // 对象浅拷贝
    Object.assign({}, {x: 1})



    // 递归深拷贝：
    // 原理就是一层一层去遍历属性 赋值，如果对象过深，会有爆栈风险。



    // JSON 深拷贝

    // 需注意，此方法不适用含有 undefined、function、symbol 属性时

    // 原理转为字符串 再转为对象就 ok 
    console.log(
      JSON.parse(JSON.stringify([1])), 
      JSON.parse(JSON.stringify({ x: 1 })),
      JSON.parse(JSON.stringify({ x: () => 1 }))
    );




  </script>
</body>
</html>