# 为什么需要模块化

抽象 / 复用 / 封装 / 依赖管理



# CommonJs

代表库为node.js早期

CommonJs 是同步导入，因为用于服务端，文件都在本地，同步导入即使卡住主线程影响也不大。

导出时是值拷贝，就算导出的值变了，导入的值也不会改变。

只能在运行时确定模块依赖关系以及输入和输出的变量。

```js
// a.js
module.exports={ foo , bar}
// b.js
const { foo,bar } = require('./a.js')
```



# Module 

Module 是异步导入，因为用于浏览器，需要下载文件，如果也采用同步导入会对渲染有很大影响。

导入导出的值都指向同一个内存地址，所以导入值会跟随导出值变化。

编译时就能确定模块依赖关系以及输入和输出的变量。



# 动态加载

ES2020提案 引入import()函数，支持动态加载模块。(支持可以在运行时确定模块依赖关系)

新功能允许将import()作为函数调用，模块的路径作为参数传递，返回一个 promise。

```js
import('/modules/myModule.mjs').then((module) => {});
```