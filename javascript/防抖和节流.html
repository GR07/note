<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>防抖和节流</title>
  <style>
    
  </style>
</head>
<body>
  <input type="text">
  <p></p>
  <script>


    // 节流 防抖 区别：

    // 函数节流不管事件触发有多频繁，都会保证在规定时间内一定会执行一次真正的事件处理函数，而函数防抖只是在最后一次事件后才触发一次函数。

    // 比如在页面的无限加载场景下，我们需要用户在滚动页面时，每隔一段时间发一次 Ajax 请求，而不是在用户停下滚动页面操作时才去请求数据。这样的场景，就适合用节流技术来实现。





    /**
     * 防抖：当持续触发事件时，会合并事件不会立即执行处理函数，2秒内没有再触发事件，事件处理函数才会执行一次。
     *
     * 用处：判断某个动作结束，如刚刚的滚动结束、input输入结束等。
     */
    // 函数防抖
    function debounce(fn, delay) {
      let timer;
      return function () {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          fn.apply(this, arguments);
        }, delay)
      }
    }





    /**
     * 节流：指定时间内只会执行一次函数。
     *
     * 用处：减少代码执行频率。
     */
    // 函数节流
    function throttle(fn, delay) {
      let flag = true;
      return function () {
        if (!flag) return;
        flag = false;
        setTimeout(() => {
          fn.apply(this, arguments);
          flag = true;
        }, delay)
      }
    }


  </script>
</body>
</html>